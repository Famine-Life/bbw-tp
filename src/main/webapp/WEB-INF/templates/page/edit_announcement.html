<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>公告编辑</title>
    <script th:src="@{js/jquery-1.3.2.min.js}"></script>
    <script th:src="@{js/home/header_model_js.js}"></script>
    <script th:src="@{js/mall/type_list_obj.js}"></script>
    <script th:src="@{js/mall/left_nav_on_goods_page.js}"></script>
    <link rel="icon" th:href="@{img/page_icon.png}"/>
    <link th:href="@{css/home_page/header_and_nav.css}" rel="stylesheet"/>
    <link th:href="@{css/mall_page/mall_page_other.css}" rel="stylesheet"/>
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous" />
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
<body>
<header th:include="header :: copy"></header>
<div th:include="short_nav_show :: short_nav_show" class="short_nav_show"></div>
<!--<nav th:include="my_nav :: my_nav" class="my_nav"></nav>-->
<div th:include="personal_nav :: personal_nav" class="personal_nav"></div>
<form style="margin-top:100px" class="form-inline" id="edit_announce_form">
    <div class="alert alert-success" role="alert" th:text="${announce.announcement}"></div>
    <div class="form-group">
        <label for="announce">公告:</label>
        <input type="text" name="announce" class="form-control" id="announce" placeholder="输入公告内容" />
    </div>
    <button type="button" class="btn btn-default edit-announce-btn">保存</button>
</form>
<script type="text/javascript">
    $(function () {
        $(".edit-announce-btn").click(function () {
            let formdata = $("#edit_announce_form").serialize();
            console.log(formdata);
            $.ajax({
                url:"edit_announcement.do",
                type:"POST",
                data:formdata,
                success:function (res) {
                    console.log(res);
                    if(res.result===1){
                        alert(res.msg);
                        window.location.reload();
                    }else{
                        alert("修改失败，请重新尝试!");
                    }
                }
            })
        });

    })

</script>
</body>
</html>